<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnÃ¡lisis de la Capa UI (/ui) - App AjiColor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 30px;
            border-bottom: 4px solid #764ba2;
            padding-bottom: 15px;
            text-align: center;
        }

        h2 {
            color: #764ba2;
            font-size: 2em;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-left: 10px;
            border-left: 5px solid #667eea;
        }

        h3 {
            color: #5a67d8;
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
            background: linear-gradient(to right, #f0f4ff, transparent);
            padding: 10px 15px;
            border-radius: 5px;
        }

        h4 {
            color: #4c51bf;
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
            color: #444;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        li {
            margin-bottom: 10px;
            color: #555;
        }

        code {
            background: #f7fafc;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e53e3e;
            font-size: 0.9em;
        }

        pre {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #667eea;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        pre code {
            background: transparent;
            color: #e2e8f0;
            padding: 0;
            font-size: 0.95em;
        }

        .highlight {
            background: linear-gradient(120deg, #ffd60a 0%, #ffd60a 100%);
            background-repeat: no-repeat;
            background-size: 100% 30%;
            background-position: 0 90%;
            padding: 2px 0;
        }

        .box {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .box-info {
            background: #ebf8ff;
            border-color: #3182ce;
        }

        .box-warning {
            background: #fffaf0;
            border-color: #ed8936;
        }

        .box-success {
            background: #f0fff4;
            border-color: #38a169;
        }

        .diagram {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .flow-step {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            margin: 10px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .arrow {
            display: inline-block;
            color: #667eea;
            font-size: 2em;
            margin: 0 10px;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        tr:hover {
            background: #f7fafc;
        }

        .folder-tree {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            line-height: 1.8;
        }

        .folder {
            color: #ffd60a;
            font-weight: bold;
        }

        .file {
            color: #68d391;
        }

        .annotation {
            color: #9f7aea;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“± AnÃ¡lisis de la Capa UI (/ui)</h1>

        <h2>ğŸ¨ PropÃ³sito de la Capa UI en Jetpack Compose</h2>
        <p>
            La carpeta <code>/ui</code> contiene toda la <span class="highlight">capa de presentaciÃ³n</span> de la aplicaciÃ³n,
            implementada con <strong>Jetpack Compose</strong>, el moderno toolkit declarativo de Android para construir interfaces nativas.
            Esta capa es responsable de renderizar la interfaz de usuario y responder a las interacciones del usuario.
        </p>

        <div class="box box-info">
            <h4>ğŸ”‘ Principios de Jetpack Compose</h4>
            <ul>
                <li><strong>Declarativo:</strong> Describes "quÃ©" mostrar, no "cÃ³mo" mostrarlo</li>
                <li><strong>Composable Functions:</strong> Funciones anotadas con @Composable que construyen UI</li>
                <li><strong>RecomposiciÃ³n:</strong> La UI se reconstruye automÃ¡ticamente cuando cambia el estado</li>
                <li><strong>Unidirectional Data Flow:</strong> Los datos fluyen hacia abajo, los eventos hacia arriba</li>
                <li><strong>State Hoisting:</strong> Elevar el estado para hacerlo reutilizable</li>
            </ul>
        </div>

        <h2>ğŸ“‚ Estructura Completa de /ui</h2>
        <div class="folder-tree">
ğŸ“ ui/
â”œâ”€â”€ ğŸ“ <span class="folder">components/</span>                    <span class="annotation">// Componentes reutilizables</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">AppBackground.kt</span>       <span class="annotation">// Fondo con degradado</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">AppDrawer.kt</span>           <span class="annotation">// Drawer de navegaciÃ³n</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">AppTopBar.kt</span>           <span class="annotation">// Barra superior</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">BottomNavigationBar.kt</span> <span class="annotation">// NavegaciÃ³n inferior</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">ColorSelector.kt</span>       <span class="annotation">// Selector de colores</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">TallaSelector.kt</span>       <span class="annotation">// Selector de tallas</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">ProfileImageSelector.kt</span> <span class="annotation">// Selector de imagen perfil</span>
â”‚   â””â”€â”€ ğŸ“„ <span class="file">VentanaDialogo.kt</span>      <span class="annotation">// DiÃ¡logos modales</span>
â”‚
â”œâ”€â”€ ğŸ“ <span class="folder">screens/</span>                       <span class="annotation">// Pantallas completas</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">StartScreen.kt</span>         <span class="annotation">// Pantalla inicial</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">LoginScreen.kt</span>         <span class="annotation">// Inicio de sesiÃ³n</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">RegistroScreen.kt</span>      <span class="annotation">// Registro de usuario</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">HomeScreen.kt</span>          <span class="annotation">// Pantalla principal adaptable</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">HomeScreenCompact.kt</span>   <span class="annotation">// Home para mÃ³viles</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">HomeScreenMedium.kt</span>    <span class="annotation">// Home para tablets</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">HomeScreenExpanded.kt</span>  <span class="annotation">// Home para desktop</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">CatalogoProductosScreen.kt</span> <span class="annotation">// CatÃ¡logo de productos</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">DetalleProductoScreen.kt</span> <span class="annotation">// Detalle de producto</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">CartScreen.kt</span>          <span class="annotation">// Carrito de compras</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">CheckoutScreen.kt</span>      <span class="annotation">// Proceso de pago</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">ProfileScreen.kt</span>       <span class="annotation">// Perfil de usuario</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">OrderHistoryScreen.kt</span>  <span class="annotation">// Historial de pedidos</span>
â”‚   â””â”€â”€ ğŸ“„ <span class="file">NotificationScreen.kt</span>  <span class="annotation">// Notificaciones</span>
â”‚
â”œâ”€â”€ ğŸ“ <span class="folder">theme/</span>                         <span class="annotation">// Sistema de diseÃ±o</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">Color.kt</span>               <span class="annotation">// Colores Material</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">Color_App.kt</span>           <span class="annotation">// Paleta personalizada AjiColor</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">Type.kt</span>                <span class="annotation">// TipografÃ­a</span>
â”‚   â”œâ”€â”€ ğŸ“„ <span class="file">Font.kt</span>                <span class="annotation">// Fuentes personalizadas</span>
â”‚   â””â”€â”€ ğŸ“„ <span class="file">Theme.kt</span>               <span class="annotation">// Tema principal</span>
â”‚
â”œâ”€â”€ ğŸ“ <span class="folder">state/</span>                         <span class="annotation">// Estados de UI</span>
â”‚   â””â”€â”€ ğŸ“„ (Estados especÃ­ficos)
â”‚
â””â”€â”€ ğŸ“ <span class="folder">utils/</span>                         <span class="annotation">// Utilidades de UI</span>
    â””â”€â”€ ğŸ“„ (Helpers de UI)
        </div>

        <h2>ğŸ¨ Sistema de DiseÃ±o - Theme</h2>

        <h3>1ï¸âƒ£ Paleta de Colores - Color_App.kt</h3>
        <p>
            La aplicaciÃ³n define una paleta de colores personalizada que representa la identidad visual de AjiColor.
        </p>

        <div class="box box-success">
            <h4>ğŸ¨ Colores Principales de AjiColor</h4>
            <pre><code>// Paleta personalizada de la marca AjiColor
val RojoAji = Color(0xFFe84266)      // #e84266 - Rojo vibrante
val VerdeAji = Color(0xFF1ea96a)     // #1ea96a - Verde esmeralda
val AmarilloAji = Color(0xFFffd141)  // #ffd141 - Amarillo brillante
val MoradoAji = Color(0xFF4f266a)    // #4f266a - Morado profundo

// Uso en Material 3 Theme
MaterialTheme(
    colorScheme = lightColorScheme(
        primary = MoradoAji,         // Color primario
        secondary = AmarilloAji,     // Color secundario
        tertiary = VerdeAji,         // Color terciario
        error = RojoAji              // Color de error
    )
)</code></pre>
        </div>

        <h4>ğŸŒˆ Sistema de Color en Material 3:</h4>
        <table>
            <thead>
                <tr>
                    <th>Color</th>
                    <th>Uso</th>
                    <th>Ejemplo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>primary</code></td>
                    <td>Componentes principales, botones destacados</td>
                    <td>BotÃ³n "Agregar al Carrito"</td>
                </tr>
                <tr>
                    <td><code>secondary</code></td>
                    <td>Componentes secundarios, acentos</td>
                    <td>FABs, chips, badges</td>
                </tr>
                <tr>
                    <td><code>tertiary</code></td>
                    <td>Complementos, variaciones</td>
                    <td>Indicadores de estado</td>
                </tr>
                <tr>
                    <td><code>error</code></td>
                    <td>Estados de error, alertas</td>
                    <td>Mensajes de validaciÃ³n</td>
                </tr>
                <tr>
                    <td><code>surface</code></td>
                    <td>Fondo de tarjetas, diÃ¡logos</td>
                    <td>Cards, modales</td>
                </tr>
                <tr>
                    <td><code>background</code></td>
                    <td>Fondo de pantallas</td>
                    <td>Scaffold background</td>
                </tr>
            </tbody>
        </table>

        <h3>2ï¸âƒ£ TipografÃ­a - Type.kt</h3>
        <p>
            Material 3 usa un sistema de tipografÃ­a escalable con roles predefinidos.
        </p>

        <div class="box box-info">
            <h4>ğŸ“ Escala TipogrÃ¡fica</h4>
            <ul>
                <li><strong>displayLarge/Medium/Small:</strong> TÃ­tulos grandes (57/45/36sp)</li>
                <li><strong>headlineLarge/Medium/Small:</strong> Encabezados (32/28/24sp)</li>
                <li><strong>titleLarge/Medium/Small:</strong> TÃ­tulos de secciÃ³n (22/16/14sp)</li>
                <li><strong>bodyLarge/Medium/Small:</strong> Texto de cuerpo (16/14/12sp)</li>
                <li><strong>labelLarge/Medium/Small:</strong> Etiquetas de botones (14/12/11sp)</li>
            </ul>
        </div>

        <h2>ğŸ§© Componentes Reutilizables</h2>

        <h3>1ï¸âƒ£ AppTopBar - Barra Superior</h3>
        <p>
            Componente que encapsula la barra de navegaciÃ³n superior con acciones y menÃº desplegable.
        </p>

        <div class="box box-success">
            <h4>ğŸ’¡ CÃ³digo: AppTopBar.kt</h4>
            <pre><code>@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun AppTopBar(
    onOpenDrawer: () -> Unit,    // Callback para abrir drawer
    onHome: () -> Unit,           // Navegar a Home
    onLogin: () -> Unit,          // Navegar a Login
    onRegister: () -> Unit        // Navegar a Registro
) {
    var showMenu by remember { mutableStateOf(false) }

    CenterAlignedTopAppBar(
        colors = TopAppBarDefaults.centerAlignedTopAppBarColors(
            containerColor = MaterialTheme.colorScheme.primary
        ),
        title = {
            Text(
                text = "App AjiColor",
                style = MaterialTheme.typography.titleLarge,
                maxLines = 1,
                overflow = TextOverflow.Ellipsis
            )
        },
        navigationIcon = {
            IconButton(onClick = onOpenDrawer) {
                Icon(Icons.Filled.Menu, contentDescription = "MenÃº")
            }
        },
        actions = {
            IconButton(onClick = onHome) {
                Icon(Icons.Filled.Home, contentDescription = "Home")
            }
            IconButton(onClick = { showMenu = true }) {
                Icon(Icons.Filled.MoreVert, contentDescription = "MÃ¡s")
            }
            DropdownMenu(
                expanded = showMenu,
                onDismissRequest = { showMenu = false }
            ) {
                DropdownMenuItem(
                    text = { Text("Login") },
                    onClick = { showMenu = false; onLogin() }
                )
                DropdownMenuItem(
                    text = { Text("Registro") },
                    onClick = { showMenu = false; onRegister() }
                )
            }
        }
    )
}</code></pre>
        </div>

        <h4>ğŸ”§ CaracterÃ­sticas Clave:</h4>
        <ul>
            <li><strong>@OptIn(ExperimentalMaterial3Api::class):</strong> Habilita APIs experimentales de Material 3</li>
            <li><strong>remember { mutableStateOf() }:</strong> Estado local que sobrevive a recomposiciones</li>
            <li><strong>Callbacks (lambdas):</strong> Eventos de navegaciÃ³n se elevan al padre</li>
            <li><strong>DropdownMenu:</strong> MenÃº contextual que se muestra/oculta segÃºn estado</li>
            <li><strong>Material Icons:</strong> Ãconos vectoriales predefinidos de Material Design</li>
        </ul>

        <h3>2ï¸âƒ£ AppBackground - Fondo Degradado</h3>
        <p>
            Componente que proporciona un fondo consistente con degradado para todas las pantallas.
        </p>

        <div class="box box-info">
            <pre><code>@Composable
fun AppBackground(
    modifier: Modifier = Modifier,
    content: @Composable BoxScope.() -> Unit
) {
    Box(
        modifier = modifier
            .fillMaxSize()
            .background(
                brush = Brush.verticalGradient(
                    colors = listOf(
                        MoradoAji,
                        Color(0xFF6B4E9C),    // Morado intermedio
                        Color(0xFF9B7BBE)     // Morado claro
                    )
                )
            )
    ) {
        content()  // Contenido hijo
    }
}</code></pre>
        </div>

        <h4>ğŸ¨ Degradados en Compose:</h4>
        <ul>
            <li><strong>Brush.verticalGradient:</strong> Degradado vertical de arriba a abajo</li>
            <li><strong>Brush.horizontalGradient:</strong> Degradado horizontal</li>
            <li><strong>Brush.radialGradient:</strong> Degradado radial desde el centro</li>
            <li><strong>Brush.sweepGradient:</strong> Degradado circular giratorio</li>
        </ul>

        <h3>3ï¸âƒ£ ColorSelector - Selector de Colores</h3>
        <p>
            Componente especializado para seleccionar colores de productos con UI visual intuitiva.
        </p>

        <div class="box box-success">
            <pre><code>@Composable
fun ColorSelector(
    coloresDisponibles: List&lt;ColorInfo&gt;,
    colorSeleccionado: ColorInfo?,
    onColorSeleccionado: (ColorInfo) -> Unit
) {
    Row(
        horizontalArrangement = Arrangement.spacedBy(8.dp),
        modifier = Modifier.horizontalScroll(rememberScrollState())
    ) {
        coloresDisponibles.forEach { color ->
            val isSelected = color == colorSeleccionado

            Box(
                modifier = Modifier
                    .size(if (isSelected) 50.dp else 40.dp)
                    .clip(CircleShape)
                    .background(color.composeColor)
                    .border(
                        width = if (isSelected) 3.dp else 1.dp,
                        color = if (isSelected)
                            MaterialTheme.colorScheme.primary
                        else
                            Color.Gray,
                        shape = CircleShape
                    )
                    .clickable { onColorSeleccionado(color) },
                contentAlignment = Alignment.Center
            ) {
                if (isSelected) {
                    Icon(
                        Icons.Filled.Check,
                        contentDescription = "Seleccionado",
                        tint = Color.White
                    )
                }
            }
        }
    }
}</code></pre>
        </div>

        <h4>ğŸ¯ Patrones de Compose:</h4>
        <ul>
            <li><strong>State Hoisting:</strong> El estado se maneja en el padre, el hijo solo reporta cambios</li>
            <li><strong>Modifier Chain:</strong> Encadenamiento de modificadores para estilizar</li>
            <li><strong>Responsive UI:</strong> TamaÃ±o dinÃ¡mico segÃºn selecciÃ³n (40dp vs 50dp)</li>
            <li><strong>Visual Feedback:</strong> Borde y check mark para indicar selecciÃ³n</li>
        </ul>

        <h2>ğŸ“± Pantallas (Screens)</h2>

        <h3>1ï¸âƒ£ Pantallas de AutenticaciÃ³n</h3>

        <h4>ğŸ“„ LoginScreen.kt</h4>
        <p>
            Pantalla de inicio de sesiÃ³n con validaciÃ³n de formulario y manejo de estado.
        </p>

        <div class="box box-info">
            <pre><code>@Composable
fun LoginScreen(
    navController: NavController,
    usuarioViewModel: UsuarioViewModel
) {
    val context = LocalContext.current
    val viewModel: AuthViewModel = viewModel(
        factory = AuthViewModelFactory(repository, sessionManager)
    )

    val estado by viewModel.login.collectAsState()
    var showPassword by remember { mutableStateOf(false) }

    // Observar Ã©xito de login para navegar
    LaunchedEffect(estado.success) {
        if (estado.success) {
            usuarioViewModel.cargarPerfil()
            navController.navigate(Screen.Home.route) {
                popUpTo(Screen.StartScreen.route) { inclusive = true }
            }
            viewModel.clearLoginResult()
        }
    }

    AppBackground {
        Column(
            modifier = Modifier
                .fillMaxSize()
                .padding(24.dp),
            verticalArrangement = Arrangement.Center,
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            Text(
                text = "Iniciar SesiÃ³n",
                style = MaterialTheme.typography.headlineLarge,
                color = AmarilloAji
            )

            Spacer(Modifier.height(24.dp))

            // Campo Email
            OutlinedTextField(
                value = estado.correo,
                onValueChange = viewModel::onLoginEmailChange,
                label = { Text("Email") },
                keyboardOptions = KeyboardOptions(
                    keyboardType = KeyboardType.Email
                ),
                isError = estado.correoError != null,
                supportingText = {
                    estado.correoError?.let { Text(it) }
                }
            )

            // Campo ContraseÃ±a
            OutlinedTextField(
                value = estado.password,
                onValueChange = viewModel::onLoginPasswordChange,
                label = { Text("ContraseÃ±a") },
                visualTransformation = if (showPassword)
                    VisualTransformation.None
                else
                    PasswordVisualTransformation(),
                trailingIcon = {
                    IconButton(onClick = { showPassword = !showPassword }) {
                        Icon(
                            if (showPassword)
                                Icons.Filled.VisibilityOff
                            else
                                Icons.Filled.Visibility,
                            contentDescription = "Toggle password"
                        )
                    }
                }
            )

            // BotÃ³n de Login
            Button(
                onClick = { viewModel.login() },
                enabled = !estado.isLoading,
                modifier = Modifier.fillMaxWidth()
            ) {
                if (estado.isLoading) {
                    CircularProgressIndicator(
                        modifier = Modifier.size(20.dp)
                    )
                } else {
                    Text("Iniciar SesiÃ³n")
                }
            }
        }
    }
}</code></pre>
        </div>

        <h4>ğŸ”‘ Conceptos Clave:</h4>
        <ul>
            <li><strong>collectAsState():</strong> Observa Flow del ViewModel y recompone cuando cambia</li>
            <li><strong>LaunchedEffect:</strong> Efecto secundario que se ejecuta una vez o cuando cambian sus keys</li>
            <li><strong>remember:</strong> Mantiene estado local entre recomposiciones</li>
            <li><strong>OutlinedTextField:</strong> Campo de texto con borde Material 3</li>
            <li><strong>visualTransformation:</strong> Transforma visualizaciÃ³n del texto (ocultar contraseÃ±a)</li>
            <li><strong>isError:</strong> Estado de error que cambia color del campo</li>
        </ul>

        <h3>2ï¸âƒ£ Pantallas Adaptables - WindowSizeClass</h3>
        <p>
            La app implementa diseÃ±o responsivo con diferentes layouts segÃºn el tamaÃ±o de pantalla.
        </p>

        <div class="box box-success">
            <h4>ğŸ“ Breakpoints de WindowSizeClass</h4>
            <pre><code>@Composable
fun HomeScreen(
    navController: NavController,
    viewModel: MainViewModel
) {
    val windowSize = calculateWindowSizeClass(activity)

    when (windowSize.widthSizeClass) {
        WindowWidthSizeClass.Compact -> {
            // MÃ³viles (width < 600dp)
            HomeScreenCompact(navController, viewModel)
        }
        WindowWidthSizeClass.Medium -> {
            // Tablets (600dp â‰¤ width < 840dp)
            HomeScreenMedium(navController, viewModel)
        }
        WindowWidthSizeClass.Expanded -> {
            // Desktop/Tablets grandes (width â‰¥ 840dp)
            HomeScreenExpanded(navController, viewModel)
        }
    }
}</code></pre>
        </div>

        <h4>ğŸ“± Variaciones por TamaÃ±o:</h4>
        <table>
            <thead>
                <tr>
                    <th>Size Class</th>
                    <th>Ancho</th>
                    <th>Layout</th>
                    <th>Ejemplo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Compact</strong></td>
                    <td>&lt; 600dp</td>
                    <td>Columna Ãºnica, Bottom Nav</td>
                    <td>Smartphones</td>
                </tr>
                <tr>
                    <td><strong>Medium</strong></td>
                    <td>600dp - 840dp</td>
                    <td>Dos columnas, Drawer modal</td>
                    <td>Tablets 7-10"</td>
                </tr>
                <tr>
                    <td><strong>Expanded</strong></td>
                    <td>â‰¥ 840dp</td>
                    <td>Tres columnas, Drawer permanente</td>
                    <td>Tablets grandes, Desktop</td>
                </tr>
            </tbody>
        </table>

        <h2>ğŸ”„ Flujo de Datos en UI</h2>

        <div class="diagram">
            <div class="flow-step">1. Usuario InteractÃºa</div>
            <span class="arrow">â†“</span>
            <div class="flow-step">2. Evento (onClick, onChange)</div>
            <span class="arrow">â†“</span>
            <div class="flow-step">3. ViewModel Procesa</div>
            <span class="arrow">â†“</span>
            <div class="flow-step">4. Estado Actualizado (StateFlow)</div>
            <span class="arrow">â†“</span>
            <div class="flow-step">5. RecomposiciÃ³n</div>
            <span class="arrow">â†“</span>
            <div class="flow-step">6. UI Actualizada</div>
        </div>

        <h3>ğŸ¬ Ejemplo: Agregar Producto al Carrito</h3>
        <div class="box box-warning">
            <pre><code>// 1. Usuario presiona botÃ³n
Button(onClick = {
    viewModel.agregarAlCarrito(producto, talla, color)
}) {
    Text("Agregar al Carrito")
}

// 2. ViewModel procesa
fun agregarAlCarrito(producto: Producto, talla: Talla?, color: ColorInfo?) {
    viewModelScope.launch {
        _carritoItems.update { currentList ->
            currentList + ProductoCarrito(...)
        }
    }
}

// 3. UI observa cambios
val items by viewModel.carritoItems.collectAsState()

// 4. Recompone automÃ¡ticamente
Text("Carrito (${items.size})")  // Se actualiza solo</code></pre>
        </div>

        <h2>ğŸ“ Mejores PrÃ¡cticas en Compose</h2>

        <div class="box box-success">
            <h3>âœ… Composables Stateless</h3>
            <p>Separa lÃ³gica de presentaciÃ³n elevando el estado:</p>
            <pre><code>// âŒ Mal: Estado interno no reutilizable
@Composable
fun ColorSelectorBad() {
    var selected by remember { mutableStateOf<ColorInfo?>(null) }
    // ... lÃ³gica de UI
}

// âœ… Bien: Estado elevado (stateless)
@Composable
fun ColorSelector(
    selectedColor: ColorInfo?,
    onColorSelected: (ColorInfo) -> Unit
) {
    // ... solo UI, sin estado interno
}</code></pre>
        </div>

        <div class="box box-info">
            <h3>ğŸ”§ Side Effects Apropiados</h3>
            <table>
                <thead>
                    <tr>
                        <th>API</th>
                        <th>Uso</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>LaunchedEffect</code></td>
                        <td>Ejecutar corrutina en composiciÃ³n</td>
                        <td>Navegar tras login exitoso</td>
                    </tr>
                    <tr>
                        <td><code>DisposableEffect</code></td>
                        <td>Registrar/desregistrar listeners</td>
                        <td>Observar eventos del sistema</td>
                    </tr>
                    <tr>
                        <td><code>SideEffect</code></td>
                        <td>Ejecutar cÃ³digo sin corrutina</td>
                        <td>Actualizar Analytics</td>
                    </tr>
                    <tr>
                        <td><code>remember</code></td>
                        <td>Cachear valores entre recomposiciones</td>
                        <td>Estado local simple</td>
                    </tr>
                    <tr>
                        <td><code>rememberCoroutineScope</code></td>
                        <td>Lanzar corrutinas desde callbacks</td>
                        <td>Animaciones en onClick</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="box box-warning">
            <h3>âš ï¸ Evitar en Composables</h3>
            <ul>
                <li>âŒ <strong>No guardar estado mutable sin remember:</strong> Se perderÃ­a en cada recomposiciÃ³n</li>
                <li>âŒ <strong>No hacer operaciones pesadas en composables:</strong> Usar ViewModel</li>
                <li>âŒ <strong>No acceder a Context.getActivity():</strong> Usar LocalContext.current</li>
                <li>âŒ <strong>No crear ViewModels con viewModel() en loops:</strong> Crear fuera y pasar como parÃ¡metro</li>
            </ul>
        </div>

        <h2>ğŸ“š Resumen</h2>
        <p>
            La capa UI de App AjiColor demuestra un uso profesional de Jetpack Compose con:
        </p>

        <div class="box box-success">
            <ul>
                <li>âœ… <strong>DiseÃ±o declarativo</strong> con funciones @Composable</li>
                <li>âœ… <strong>Sistema de diseÃ±o consistente</strong> con Material 3</li>
                <li>âœ… <strong>Componentes reutilizables</strong> bien encapsulados</li>
                <li>âœ… <strong>DiseÃ±o responsivo</strong> con WindowSizeClass</li>
                <li>âœ… <strong>GestiÃ³n de estado</strong> con State Hoisting</li>
                <li>âœ… <strong>SeparaciÃ³n de responsabilidades</strong> UI/ViewModel</li>
                <li>âœ… <strong>Accesibilidad</strong> con contentDescription</li>
            </ul>
        </div>

        <p style="text-align: center; margin-top: 40px; font-size: 1.1em; color: #667eea;">
            <strong>ğŸ“± UI declarativa + Compose = Desarrollo Android moderno y eficiente</strong>
        </p>
    </div>
</body>
</html>
