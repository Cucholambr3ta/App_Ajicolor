<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lisis del Punto de Entrada: MainActivity.kt - App AjiColor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 30px;
            border-bottom: 4px solid #764ba2;
            padding-bottom: 15px;
            text-align: center;
        }

        h2 {
            color: #764ba2;
            font-size: 2em;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-left: 10px;
            border-left: 5px solid #667eea;
        }

        h3 {
            color: #5a67d8;
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
            background: linear-gradient(to right, #f0f4ff, transparent);
            padding: 10px 15px;
            border-radius: 5px;
        }

        h4 {
            color: #4c51bf;
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
            color: #444;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        li {
            margin-bottom: 10px;
            color: #555;
        }

        code {
            background: #f7fafc;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e53e3e;
            font-size: 0.9em;
        }

        pre {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #667eea;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        pre code {
            background: transparent;
            color: #e2e8f0;
            padding: 0;
            font-size: 0.95em;
        }

        .highlight {
            background: linear-gradient(120deg, #ffd60a 0%, #ffd60a 100%);
            background-repeat: no-repeat;
            background-size: 100% 30%;
            background-position: 0 90%;
            padding: 2px 0;
        }

        .box {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .box-info {
            background: #ebf8ff;
            border-color: #3182ce;
        }

        .box-warning {
            background: #fffaf0;
            border-color: #ed8936;
        }

        .box-success {
            background: #f0fff4;
            border-color: #38a169;
        }

        .diagram {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .flow-step {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            margin: 10px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .arrow {
            display: inline-block;
            color: #667eea;
            font-size: 2em;
            margin: 0 10px;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        tr:hover {
            background: #f7fafc;
        }

        .lifecycle {
            background: #f0f4ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .lifecycle-step {
            background: white;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 5px 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ An√°lisis del Punto de Entrada: MainActivity.kt</h1>

        <h2>üéØ Rol de MainActivity en la Aplicaci√≥n</h2>
        <p>
            <code>MainActivity</code> es el <span class="highlight">punto de entrada principal</span> de la aplicaci√≥n Android.
            Como √∫nico Activity en una arquitectura basada en <strong>Jetpack Compose</strong>, cumple las siguientes funciones cr√≠ticas:
        </p>

        <div class="box box-info">
            <h4>üîë Responsabilidades Principales</h4>
            <ul>
                <li><strong>Punto de Entrada:</strong> Primera clase que se ejecuta al abrir la app</li>
                <li><strong>Contenedor de UI:</strong> Hospeda toda la interfaz de usuario con Compose</li>
                <li><strong>Configuraci√≥n de Navegaci√≥n:</strong> Establece el NavHost y el grafo de navegaci√≥n</li>
                <li><strong>Aplicaci√≥n de Tema:</strong> Aplica el tema visual global de la app</li>
                <li><strong>Gesti√≥n de ViewModels:</strong> Crea e inyecta ViewModels compartidos</li>
                <li><strong>Ciclo de Vida:</strong> Gestiona el ciclo de vida de la aplicaci√≥n</li>
            </ul>
        </div>

        <h3>üì± ComponentActivity vs Activity</h3>
        <table>
            <thead>
                <tr>
                    <th>Aspecto</th>
                    <th>Activity (Tradicional)</th>
                    <th>ComponentActivity (Compose)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Librer√≠a</strong></td>
                    <td>android.app.Activity</td>
                    <td>androidx.activity.ComponentActivity</td>
                </tr>
                <tr>
                    <td><strong>UI Framework</strong></td>
                    <td>XML Views</td>
                    <td>Jetpack Compose</td>
                </tr>
                <tr>
                    <td><strong>Configuraci√≥n UI</strong></td>
                    <td>setContentView(R.layout.xml)</td>
                    <td>setContent { Composables }</td>
                </tr>
                <tr>
                    <td><strong>ViewModel</strong></td>
                    <td>ViewModelProvider</td>
                    <td>viewModel() Composable</td>
                </tr>
                <tr>
                    <td><strong>Lifecycle</strong></td>
                    <td>Manual con observadores</td>
                    <td>Integrado con Compose</td>
                </tr>
            </tbody>
        </table>

        <h2>üîç An√°lisis Detallado del onCreate()</h2>
        <p>
            El m√©todo <code>onCreate()</code> es el <strong>primer m√©todo del ciclo de vida</strong> que se ejecuta
            cuando se crea la Activity. Aqu√≠ se configura todo el entorno de la aplicaci√≥n.
        </p>

        <div class="box box-success">
            <h4>üìù C√≥digo Completo del onCreate()</h4>
            <pre><code>@OptIn(ExperimentalMaterial3Api::class)
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        // 1. Llamar al m√©todo padre (SIEMPRE primero)
        super.onCreate(savedInstanceState)

        // 2. Configurar el contenido con Compose
        setContent {
            // 3. Aplicar tema de la aplicaci√≥n
            AppAjiColorGrupo4Theme {
                // 4. Crear ViewModels compartidos
                val viewModel: MainViewModel = viewModel()
                val navController = rememberNavController()
                val carritoViewModel: CarritoViewModel = viewModel()
                val usuarioViewModel: UsuarioViewModel = viewModel(
                    factory = object : ViewModelProvider.Factory {
                        @Suppress("UNCHECKED_CAST")
                        override fun <T : ViewModel> create(modelClass: Class<T>): T {
                            return UsuarioViewModel(application) as T
                        }
                    }
                )

                // 5. Escuchar eventos de navegaci√≥n
                LaunchedEffect(Unit) {
                    viewModel.navigationEvents.collectLatest { event ->
                        when (event) {
                            is NavigationEvent.NavigateTo -> {
                                navController.navigate(event.route.route) {
                                    event.popUpToRoute?.let {
                                        popUpTo(it.route) {
                                            inclusive = event.inclusive
                                        }
                                    }
                                    launchSingleTop = event.singleTop
                                    restoreState = true
                                }
                            }
                            NavigationEvent.PopBackStack -> navController.popBackStack()
                            NavigationEvent.NavigateUp -> navController.navigateUp()
                        }
                    }
                }

                // 6. Estructura principal con Scaffold + NavHost
                Scaffold(
                    modifier = Modifier.fillMaxSize()
                ) { innerPadding ->
                    NavHost(
                        navController = navController,
                        startDestination = Screen.StartScreen.route,
                        modifier = Modifier.padding(innerPadding)
                    ) {
                        // Definici√≥n de todas las rutas...
                    }
                }
            }
        }
    }
}</code></pre>
        </div>

        <h3>1Ô∏è‚É£ Configuraci√≥n de la Vista con setContent</h3>
        <p>
            En Jetpack Compose, <code>setContent { }</code> reemplaza a <code>setContentView()</code> de las Views XML tradicionales.
        </p>

        <div class="box box-info">
            <h4>üé® setContent vs setContentView</h4>
            <pre><code>// ‚ùå Approach Tradicional (XML Views)
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)  // Infla XML

    // Configurar manualmente vistas
    val button = findViewById<Button>(R.id.myButton)
    button.setOnClickListener { /* ... */ }
}

// ‚úÖ Approach Moderno (Jetpack Compose)
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContent {  // Lambda que define UI declarativa
        AppAjiColorGrupo4Theme {
            // Todo el √°rbol de UI se define aqu√≠
            Scaffold { /* ... */ }
        }
    }
}</code></pre>
        </div>

        <h4>üîß Caracter√≠sticas de setContent</h4>
        <ul>
            <li><strong>Declarativo:</strong> Describes "qu√©" mostrar, no "c√≥mo" construirlo</li>
            <li><strong>Lambda Composable:</strong> El bloque es una funci√≥n @Composable</li>
            <li><strong>Sin XML:</strong> Elimina la necesidad de archivos de layout</li>
            <li><strong>Recomposici√≥n:</strong> La UI se actualiza autom√°ticamente cuando cambia el estado</li>
            <li><strong>Tipo-Safe:</strong> Errores detectados en tiempo de compilaci√≥n</li>
        </ul>

        <h3>2Ô∏è‚É£ Configuraci√≥n del Tema</h3>
        <p>
            El tema visual de la aplicaci√≥n se aplica envolviendo todo el contenido en el Composable del tema personalizado.
        </p>

        <div class="box box-success">
            <pre><code>setContent {
    // Tema personalizado que envuelve toda la app
    AppAjiColorGrupo4Theme {
        // ‚Üë Este Composable aplica:
        // - Paleta de colores (MoradoAji, AmarilloAji, etc.)
        // - Tipograf√≠a (Material 3 Typography)
        // - Shapes (formas de componentes)
        // - Color schemes (light/dark mode)

        // Todo el contenido hereda el tema
        Scaffold { /* ... */ }
    }
}</code></pre>
        </div>

        <h4>üé® Composici√≥n del Tema</h4>
        <p>
            El tema se define en <code>ui/theme/Theme.kt</code> y proporciona:
        </p>
        <ul>
            <li><strong>MaterialTheme.colorScheme:</strong> Colores primary, secondary, error, background, surface</li>
            <li><strong>MaterialTheme.typography:</strong> Estilos de texto (headlineLarge, bodyMedium, etc.)</li>
            <li><strong>MaterialTheme.shapes:</strong> Formas de componentes (bordes redondeados)</li>
            <li><strong>Dark/Light Mode:</strong> Soporte autom√°tico de temas claro/oscuro</li>
        </ul>

        <h3>3Ô∏è‚É£ Configuraci√≥n del NavHost</h3>
        <p>
            El <code>NavHost</code> es el componente central que gestiona la navegaci√≥n entre pantallas en Compose.
        </p>

        <div class="box box-warning">
            <h4>üß≠ Anatom√≠a del NavHost</h4>
            <pre><code>Scaffold(
    modifier = Modifier.fillMaxSize()
) { innerPadding ->
    // NavHost es el contenedor de navegaci√≥n
    NavHost(
        // 1. Controlador que gestiona la navegaci√≥n
        navController = navController,

        // 2. Ruta inicial (primera pantalla al abrir la app)
        startDestination = Screen.StartScreen.route,

        // 3. Modifier para ajustar al padding del Scaffold
        modifier = Modifier.padding(innerPadding)
    ) {
        // 4. Definici√≥n de rutas con composable()

        // Ruta simple sin argumentos
        composable(Screen.StartScreen.route) {
            StartScreen(navController = navController)
        }

        composable(Screen.Login.route) {
            LoginScreen(
                navController = navController,
                usuarioViewModel = usuarioViewModel
            )
        }

        composable(Screen.Home.route) {
            HomeScreen(
                navController = navController,
                viewModel = viewModel,
                usuarioViewModel = usuarioViewModel
            )
        }

        // Ruta con argumentos
        composable(
            route = Screen.DetalleProducto.routePattern,
            arguments = listOf(
                navArgument("productoId") {
                    type = NavType.StringType
                }
            )
        ) { backStackEntry ->
            // Extraer argumento del back stack
            val productoId = backStackEntry.arguments?.getString("productoId") ?: ""

            DetalleProductoScreen(
                productoId = productoId,
                navController = navController,
                carritoViewModel = carritoViewModel
            )
        }

        // Ruta con m√∫ltiples argumentos opcionales
        composable(
            route = "${Screen.PaymentMethods.route}?direccion={direccion}&telefono={telefono}&notas={notas}",
            arguments = listOf(
                navArgument("direccion") {
                    type = NavType.StringType
                    nullable = true
                },
                navArgument("telefono") {
                    type = NavType.StringType
                    nullable = true
                },
                navArgument("notas") {
                    type = NavType.StringType
                    nullable = true
                }
            )
        ) { backStackEntry ->
            PaymentMethodsScreen(
                navController = navController,
                carritoViewModel = carritoViewModel,
                direccionEnvio = backStackEntry.arguments?.getString("direccion"),
                telefono = backStackEntry.arguments?.getString("telefono"),
                notasAdicionales = backStackEntry.arguments?.getString("notas")
            )
        }
    }
}</code></pre>
        </div>

        <h4>üìä Componentes del NavHost</h4>
        <table>
            <thead>
                <tr>
                    <th>Componente</th>
                    <th>Descripci√≥n</th>
                    <th>Ejemplo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>navController</code></td>
                    <td>Controlador que gestiona navegaci√≥n</td>
                    <td><code>rememberNavController()</code></td>
                </tr>
                <tr>
                    <td><code>startDestination</code></td>
                    <td>Primera pantalla al abrir la app</td>
                    <td><code>Screen.StartScreen.route</code></td>
                </tr>
                <tr>
                    <td><code>composable()</code></td>
                    <td>Define un destino de navegaci√≥n</td>
                    <td><code>composable("login") { LoginScreen() }</code></td>
                </tr>
                <tr>
                    <td><code>arguments</code></td>
                    <td>Par√°metros que se pasan entre pantallas</td>
                    <td><code>navArgument("id") { type = NavType.StringType }</code></td>
                </tr>
                <tr>
                    <td><code>backStackEntry</code></td>
                    <td>Acceso a argumentos de la ruta actual</td>
                    <td><code>backStackEntry.arguments?.getString("id")</code></td>
                </tr>
            </tbody>
        </table>

        <h3>4Ô∏è‚É£ Gesti√≥n de ViewModels Compartidos</h3>
        <p>
            Los ViewModels se crean en el <code>setContent</code> para que sean compartidos entre m√∫ltiples pantallas.
        </p>

        <div class="box box-info">
            <pre><code>setContent {
    AppAjiColorGrupo4Theme {
        // ViewModel principal de la app
        val viewModel: MainViewModel = viewModel()

        // ViewModel del carrito (compartido entre pantallas)
        val carritoViewModel: CarritoViewModel = viewModel()

        // ViewModel de usuario con Factory personalizado
        val usuarioViewModel: UsuarioViewModel = viewModel(
            factory = object : ViewModelProvider.Factory {
                @Suppress("UNCHECKED_CAST")
                override fun <T : ViewModel> create(modelClass: Class<T>): T {
                    // Inyecta Application como dependencia
                    return UsuarioViewModel(application) as T
                }
            }
        )

        // Estos ViewModels se pasan a las pantallas que los necesitan
        NavHost(...) {
            composable(Screen.Home.route) {
                HomeScreen(
                    viewModel = viewModel,              // ViewModel principal
                    usuarioViewModel = usuarioViewModel, // ViewModel de usuario
                    // ...
                )
            }

            composable(Screen.Cart.route) {
                CartScreen(
                    carritoViewModel = carritoViewModel // ViewModel del carrito
                )
            }
        }
    }
}</code></pre>
        </div>

        <h4>üîë Ventajas de ViewModels Compartidos</h4>
        <ul>
            <li><strong>Estado Compartido:</strong> El carrito persiste entre pantallas</li>
            <li><strong>Evita Re-creaci√≥n:</strong> No se pierde el estado al navegar</li>
            <li><strong>Scope de Activity:</strong> Sobreviven a rotaciones y cambios de configuraci√≥n</li>
            <li><strong>Comunicaci√≥n:</strong> Facilita compartir datos entre pantallas</li>
        </ul>

        <h3>5Ô∏è‚É£ Sistema de Eventos de Navegaci√≥n</h3>
        <p>
            La app implementa un patr√≥n avanzado donde el ViewModel puede disparar eventos de navegaci√≥n
            que la UI observa y ejecuta.
        </p>

        <div class="box box-success">
            <pre><code>// En MainActivity.kt
LaunchedEffect(Unit) {
    // Observar eventos de navegaci√≥n del ViewModel
    viewModel.navigationEvents.collectLatest { event ->
        when (event) {
            // Navegar a una ruta espec√≠fica
            is NavigationEvent.NavigateTo -> {
                navController.navigate(event.route.route) {
                    // Configurar opciones de navegaci√≥n
                    event.popUpToRoute?.let {
                        popUpTo(it.route) {
                            inclusive = event.inclusive
                        }
                    }
                    launchSingleTop = event.singleTop
                    restoreState = true
                }
            }

            // Volver a la pantalla anterior
            NavigationEvent.PopBackStack -> {
                navController.popBackStack()
            }

            // Navegar hacia arriba
            NavigationEvent.NavigateUp -> {
                navController.navigateUp()
            }
        }
    }
}

// En MainViewModel.kt
sealed class NavigationEvent {
    data class NavigateTo(
        val route: Screen,
        val popUpToRoute: Screen? = null,
        val inclusive: Boolean = false,
        val singleTop: Boolean = false
    ) : NavigationEvent()

    data object PopBackStack : NavigationEvent()
    data object NavigateUp : NavigationEvent()
}

class MainViewModel : ViewModel() {
    private val _navigationEvents = Channel<NavigationEvent>()
    val navigationEvents = _navigationEvents.receiveAsFlow()

    fun navigateToHome() {
        viewModelScope.launch {
            _navigationEvents.send(
                NavigationEvent.NavigateTo(Screen.Home)
            )
        }
    }
}</code></pre>
        </div>

        <h4>‚úÖ Ventajas del Patr√≥n de Eventos</h4>
        <ul>
            <li><strong>Desacoplamiento:</strong> ViewModel no depende de NavController</li>
            <li><strong>Testeable:</strong> Puedes probar l√≥gica de navegaci√≥n sin UI</li>
            <li><strong>Centralizado:</strong> Un solo lugar para gestionar navegaci√≥n</li>
            <li><strong>Flexible:</strong> F√°cil agregar nuevos tipos de eventos</li>
        </ul>

        <h2>üì¶ Scaffold: Estructura de Layout Principal</h2>
        <p>
            <code>Scaffold</code> es el componente de Material 3 que proporciona la estructura b√°sica
            de layout de la app con soporte para TopBar, BottomBar, FAB, Drawer, etc.
        </p>

        <div class="box box-info">
            <pre><code>Scaffold(
    modifier = Modifier.fillMaxSize(),

    // Componentes opcionales que puedes agregar:
    // topBar = { TopAppBar(...) },
    // bottomBar = { BottomNavigationBar(...) },
    // floatingActionButton = { FloatingActionButton(...) },
    // drawer = { NavigationDrawer(...) }

) { innerPadding ->
    // El contenido principal usa el padding interno
    // para no quedar tapado por TopBar/BottomBar
    NavHost(
        modifier = Modifier.padding(innerPadding)
    ) {
        // Rutas...
    }
}</code></pre>
        </div>

        <h4>üé® Componentes Opcionales de Scaffold</h4>
        <table>
            <thead>
                <tr>
                    <th>Componente</th>
                    <th>Posici√≥n</th>
                    <th>Uso</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>topBar</code></td>
                    <td>Superior</td>
                    <td>Barra de t√≠tulo, men√∫, b√∫squeda</td>
                </tr>
                <tr>
                    <td><code>bottomBar</code></td>
                    <td>Inferior</td>
                    <td>Navegaci√≥n principal (tabs)</td>
                </tr>
                <tr>
                    <td><code>floatingActionButton</code></td>
                    <td>Flotante</td>
                    <td>Acci√≥n principal de la pantalla</td>
                </tr>
                <tr>
                    <td><code>drawer</code></td>
                    <td>Lateral</td>
                    <td>Men√∫ de navegaci√≥n lateral</td>
                </tr>
                <tr>
                    <td><code>snackbarHost</code></td>
                    <td>Variable</td>
                    <td>Mensajes temporales</td>
                </tr>
            </tbody>
        </table>

        <h2>üîÑ Ciclo de Vida de la Activity</h2>
        <p>
            Aunque Compose simplifica mucho la UI, la Activity sigue teniendo su ciclo de vida tradicional.
        </p>

        <div class="lifecycle">
            <h4>üìä M√©todos del Ciclo de Vida</h4>

            <div class="lifecycle-step">
                <strong>1. onCreate()</strong>
                <p>La Activity se est√° creando. Inicializa componentes, ViewModels, configura UI.</p>
                <code>setContent { ... }</code>
            </div>

            <div class="lifecycle-step">
                <strong>2. onStart()</strong>
                <p>La Activity est√° a punto de ser visible. Preparar animaciones, registrar listeners.</p>
            </div>

            <div class="lifecycle-step">
                <strong>3. onResume()</strong>
                <p>La Activity est√° visible y activa. El usuario puede interactuar.</p>
            </div>

            <div class="lifecycle-step">
                <strong>4. onPause()</strong>
                <p>La Activity est√° perdiendo el foco. Pausar animaciones, guardar datos temporales.</p>
            </div>

            <div class="lifecycle-step">
                <strong>5. onStop()</strong>
                <p>La Activity ya no es visible. Liberar recursos pesados.</p>
            </div>

            <div class="lifecycle-step">
                <strong>6. onDestroy()</strong>
                <p>La Activity se est√° destruyendo. Limpiar recursos, cancelar operaciones.</p>
            </div>
        </div>

        <h4>üîÑ Sobrevivencia a Cambios de Configuraci√≥n</h4>
        <p>
            Los ViewModels creados con <code>viewModel()</code> sobreviven a rotaciones de pantalla
            y otros cambios de configuraci√≥n, mientras que <code>onCreate()</code> se ejecuta nuevamente.
        </p>

        <div class="box box-warning">
            <h4>‚ö†Ô∏è Rotaci√≥n de Pantalla</h4>
            <pre><code>// Rotaci√≥n de 90¬∞
// ‚Üì Activity se destruye
onPause() ‚Üí onStop() ‚Üí onDestroy()

// ‚Üì Activity se recrea
onCreate() ‚Üí onStart() ‚Üí onResume()

// ‚úÖ ViewModel sobrevive
// El estado del carrito, usuario, etc. se mantiene
val carritoViewModel: CarritoViewModel = viewModel()
// ‚Üë Devuelve la MISMA instancia antes y despu√©s de la rotaci√≥n</code></pre>
        </div>

        <h2>üéØ Mapa de Rutas Completo</h2>
        <p>
            La app define 17 rutas principales organizadas por funcionalidad:
        </p>

        <table>
            <thead>
                <tr>
                    <th>Categor√≠a</th>
                    <th>Rutas</th>
                    <th>Argumentos</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Autenticaci√≥n</strong></td>
                    <td>StartScreen, Init, Login, Registro, PasswordRecovery</td>
                    <td>Ninguno</td>
                </tr>
                <tr>
                    <td><strong>Principal</strong></td>
                    <td>Home, Profile, Settings, Notification</td>
                    <td>Ninguno</td>
                </tr>
                <tr>
                    <td><strong>Comercio</strong></td>
                    <td>Catalogo, DetalleProducto, Cart, Checkout</td>
                    <td>productoId (String)</td>
                </tr>
                <tr>
                    <td><strong>Pago</strong></td>
                    <td>PaymentMethods, Success</td>
                    <td>direccion, telefono, notas, numeroPedido</td>
                </tr>
                <tr>
                    <td><strong>Pedidos</strong></td>
                    <td>OrderHistory, DetallePedido</td>
                    <td>numeroPedido (String)</td>
                </tr>
                <tr>
                    <td><strong>Debug</strong></td>
                    <td>Debug</td>
                    <td>Ninguno</td>
                </tr>
            </tbody>
        </table>

        <h2>üö´ Sin Inyecci√≥n de Dependencias (Hilt/Dagger)</h2>
        <p>
            Este proyecto <strong>NO utiliza</strong> anotaciones como <code>@AndroidEntryPoint</code> de Hilt.
            En su lugar, usa <strong>inyecci√≥n manual</strong> a trav√©s de:
        </p>

        <div class="box box-warning">
            <h4>üîß Inyecci√≥n Manual vs Hilt</h4>
            <table>
                <thead>
                    <tr>
                        <th>Aspecto</th>
                        <th>Con Hilt</th>
                        <th>Manual (Este Proyecto)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Anotaci√≥n</strong></td>
                        <td><code>@AndroidEntryPoint</code></td>
                        <td>Ninguna</td>
                    </tr>
                    <tr>
                        <td><strong>ViewModels</strong></td>
                        <td><code>@HiltViewModel</code> + <code>@Inject</code></td>
                        <td><code>viewModel(factory = ...)</code></td>
                    </tr>
                    <tr>
                        <td><strong>Dependencias</strong></td>
                        <td>Inyecci√≥n autom√°tica</td>
                        <td>Creaci√≥n manual en Composables</td>
                    </tr>
                    <tr>
                        <td><strong>Ventaja</strong></td>
                        <td>Menos c√≥digo, m√°s escalable</td>
                        <td>M√°s simple, sin configuraci√≥n</td>
                    </tr>
                    <tr>
                        <td><strong>Desventaja</strong></td>
                        <td>Curva de aprendizaje, setup complejo</td>
                        <td>M√°s c√≥digo repetitivo</td>
                    </tr>
                </tbody>
            </table>

            <h4>üìù Ejemplo de Inyecci√≥n Manual</h4>
            <pre><code>// En LoginScreen.kt
@Composable
fun LoginScreen(navController: NavController, usuarioViewModel: UsuarioViewModel) {
    val context = LocalContext.current

    // Crear instancias manualmente
    val database = AppDatabase.getInstance(context)
    val repository = UserRepository(database.userDao())
    val sessionManager = SessionManager(context)

    // ViewModel con Factory personalizado
    val authViewModel: AuthViewModel = viewModel(
        factory = AuthViewModelFactory(repository, sessionManager)
    )

    // ... resto de la pantalla
}</code></pre>
        </div>

        <h2>üìö Resumen de MainActivity</h2>
        <p>
            <code>MainActivity</code> en App AjiColor es un ejemplo de arquitectura moderna con Compose:
        </p>

        <div class="box box-success">
            <h4>‚úÖ Caracter√≠sticas Implementadas</h4>
            <ul>
                <li>‚úÖ <strong>ComponentActivity</strong> como base para Compose</li>
                <li>‚úÖ <strong>setContent { }</strong> para UI declarativa</li>
                <li>‚úÖ <strong>AppAjiColorGrupo4Theme</strong> para tema personalizado</li>
                <li>‚úÖ <strong>NavHost</strong> con 17 rutas configuradas</li>
                <li>‚úÖ <strong>ViewModels compartidos</strong> entre pantallas</li>
                <li>‚úÖ <strong>Sistema de eventos</strong> de navegaci√≥n desde ViewModel</li>
                <li>‚úÖ <strong>Scaffold</strong> como estructura de layout</li>
                <li>‚úÖ <strong>Argumentos de navegaci√≥n</strong> tipo-safe</li>
                <li>‚úÖ <strong>Sin inyecci√≥n de dependencias</strong> (inyecci√≥n manual)</li>
            </ul>
        </div>

        <div class="box box-info">
            <h4>üöÄ Flujo Completo de Inicio</h4>
            <div class="diagram">
                <div class="flow-step">1. App Launch</div>
                <span class="arrow">‚Üí</span>
                <div class="flow-step">2. onCreate()</div>
                <span class="arrow">‚Üí</span>
                <div class="flow-step">3. setContent { }</div>
                <span class="arrow">‚Üí</span>
                <div class="flow-step">4. Apply Theme</div>
                <span class="arrow">‚Üí</span>
                <div class="flow-step">5. Create ViewModels</div>
                <span class="arrow">‚Üí</span>
                <div class="flow-step">6. Setup NavController</div>
                <span class="arrow">‚Üí</span>
                <div class="flow-step">7. Render Scaffold</div>
                <span class="arrow">‚Üí</span>
                <div class="flow-step">8. Show StartScreen</div>
            </div>
        </div>

        <p style="text-align: center; margin-top: 40px; font-size: 1.1em; color: #667eea;">
            <strong>üöÄ MainActivity: El orquestador que lanza y coordina toda la aplicaci√≥n</strong>
        </p>
    </div>
</body>
</html>
